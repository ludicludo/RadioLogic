cmake_minimum_required(VERSION 2.8)
project(RadioLogicCreator)
set(ORTHANC_FRAMEWORK_VERSION "mainline")
set(ORTHANC_FRAMEWORK_SOURCE "hg" CACHE STRING "Source of the Orthanc source code (can be hg, archive, web or path)")
set(USE_SYSTEM_ORTHANC_SDK ON CACHE BOOL "Use the system version of the Orthanc plugin SDK")
execute_process(
  COMMAND
  /usr/bin/python ${CMAKE_SOURCE_DIR}/Resources/SyncOrthancFolder.py
)
include(${CMAKE_SOURCE_DIR}/Resources/Orthanc/DownloadOrthancFramework.cmake)
set(ORTHANC_FRAMEWORK_PLUGIN ON)
include(${ORTHANC_ROOT}/Resources/CMake/OrthancFrameworkParameters.cmake)
set(ENABLE_LOCALE ON)
include(${ORTHANC_ROOT}/Resources/CMake/OrthancFrameworkConfiguration.cmake)
EmbedResources(
  ORTHANC_EXPLORER  ${CMAKE_SOURCE_DIR}/Resources/OrthancExplorer.js
)
include_directories(
${ORTHANC_ROOT}
${ORTHANC_ROOT}/Core
${ORTHANC_ROOT}/Plugins/Include
)
add_definitions(
  -DHAS_ORTHANC_EXCEPTION=1
  -DORTHANC_ENABLE_LOGGING_PLUGIN=1
)
set(CORE_SOURCES
  ${ORTHANC_ROOT}/Plugins/Samples/Common/OrthancPluginCppWrapper.cpp
  ${ORTHANC_CORE_SOURCES}
)
add_library(RadioLogicCreator SHARED 
  ${CORE_SOURCES}
  ${CMAKE_SOURCE_DIR}/Plugin/Plugin.cpp
  ${CMAKE_SOURCE_DIR}/Plugin/RadioLogicCreator.cpp
  ${CMAKE_SOURCE_DIR}/Plugin/RadioLogicTools.cpp
  ${AUTOGENERATED_SOURCES}
)
